(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},567:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115),n=s(63),o=s(2619),i=s.n(o),l=s(2327);function c(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),s=e.id,[o,c]=(0,a.useState)(null),[d,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[x,g]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1);async function b(){try{h(!0),g("");let[e,t]=await Promise.all([l.Me.get(s),l.ic.listSongs({singerId:s,limit:100})]);c(e.singer),m(t.songs||[]),h(!1)}catch(e){console.error("[SingerProfile] Load error:",e),g(e instanceof Error?e.message:"Failed to load singer"),h(!1)}}async function j(){try{await l.Me.delete(s),t.push("/dashboard/singers")}catch(e){console.error("[SingerProfile] Delete error:",e),alert("Failed to delete singer")}}function v(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}(0,a.useEffect)(()=>{b()},[s]);let y={totalSongs:d.length,completedSongs:d.filter(e=>"completed"===e.status).length,totalPlays:d.reduce((e,t)=>e+t.playCount,0),totalLikes:d.reduce((e,t)=>e+t.likeCount,0)};return u?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-violet-200 border-t-violet-600 rounded-full animate-spin"})}):x||!o?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"max-w-md w-full rounded-2xl bg-white/70 backdrop-blur-xl p-8 border border-slate-200/50 shadow-lg text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Singer Not Found"}),(0,r.jsx)("p",{className:"text-slate-600 mb-6",children:x||"The singer you're looking for doesn't exist."}),(0,r.jsxs)(i(),{href:"/dashboard/singers",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white font-semibold hover:from-violet-700 hover:to-fuchsia-700 transition-all",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Singers"]})]})}):(0,r.jsxs)("div",{className:"min-h-screen p-6 pb-24",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(i(),{href:"/dashboard/singers",className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{className:"font-medium",children:"Back to Singers"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(i(),{href:"/dashboard/singers/".concat(s,"/edit"),className:"px-4 py-2 rounded-xl bg-white/70 backdrop-blur-xl border border-slate-200/50 text-slate-700 font-semibold hover:bg-white/90 transition-all",children:"Edit Singer"}),(0,r.jsx)("button",{onClick:()=>p(!0),className:"px-4 py-2 rounded-xl bg-red-50 border border-red-200 text-red-600 font-semibold hover:bg-red-100 transition-all",children:"Delete Singer"})]})]}),(0,r.jsx)("div",{className:"rounded-2xl bg-gradient-to-br from-violet-50 via-white to-fuchsia-50 backdrop-blur-xl p-8 border border-slate-200/50 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-8",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:o.profileImageUrl?(0,r.jsx)("img",{src:o.profileImageUrl,alt:o.name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-white shadow-xl"}):(0,r.jsx)("div",{className:"w-32 h-32 rounded-2xl bg-gradient-to-br from-violet-600 to-fuchsia-600 flex items-center justify-center shadow-xl",children:(0,r.jsx)("svg",{className:"w-16 h-16 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-slate-900 mb-3",children:o.name}),o.description&&(0,r.jsx)("p",{className:"text-lg text-slate-600 mb-6 max-w-3xl",children:o.description}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"rounded-xl bg-white/70 backdrop-blur-xl p-4 border border-slate-200/50",children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Total Songs"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:y.totalSongs})]}),(0,r.jsxs)("div",{className:"rounded-xl bg-white/70 backdrop-blur-xl p-4 border border-slate-200/50",children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Completed"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:y.completedSongs})]}),(0,r.jsxs)("div",{className:"rounded-xl bg-white/70 backdrop-blur-xl p-4 border border-slate-200/50",children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Total Plays"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-violet-600",children:y.totalPlays})]}),(0,r.jsxs)("div",{className:"rounded-xl bg-white/70 backdrop-blur-xl p-4 border border-slate-200/50",children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Total Likes"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-fuchsia-600",children:y.totalLikes})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6 mt-6 pt-6 border-t border-slate-200/50 text-sm text-slate-600",children:[o.voiceId&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),(0,r.jsxs)("span",{className:"font-medium",children:["Voice ID: ",o.voiceId.substring(0,8),"..."]})]}),(0,r.jsxs)("div",{className:"text-slate-500",children:["Created ",v(o.createdAt)]})]})]})]})}),(0,r.jsxs)("div",{className:"rounded-2xl bg-white/70 backdrop-blur-xl p-6 border border-slate-200/50 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Music Catalog"}),(0,r.jsxs)("p",{className:"text-slate-600 mt-1",children:["All songs by ",o.name]})]}),(0,r.jsx)(i(),{href:"/dashboard/music/create?singerId=".concat(s),className:"px-4 py-2 rounded-xl bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white font-semibold hover:from-violet-700 hover:to-fuchsia-700 transition-all",children:"+ New Song"})]}),0===d.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No Songs Yet"}),(0,r.jsxs)("p",{className:"text-slate-600 mb-6",children:["Create your first song with ",o.name]}),(0,r.jsxs)(i(),{href:"/dashboard/music/create?singerId=".concat(s),className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-violet-600 to-fuchsia-600 text-white font-semibold hover:from-violet-700 hover:to-fuchsia-700 transition-all",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create First Song"]})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>(e.mood&&JSON.parse(e.mood),(0,r.jsxs)(i(),{href:"/dashboard/music/".concat(e.id),className:"group rounded-xl bg-gradient-to-br from-white to-slate-50 border border-slate-200/50 shadow-sm hover:shadow-lg transition-all duration-300 hover:scale-105 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-violet-50 to-fuchsia-50 border-b border-slate-200/50",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-bold text-slate-900 mb-1 line-clamp-1",children:e.title}),e.genre&&(0,r.jsx)("span",{className:"inline-block px-2 py-1 rounded-lg bg-violet-100 text-violet-700 text-xs font-semibold",children:e.genre})]}),(0,r.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-semibold capitalize ".concat("completed"===e.status?"bg-green-100 text-green-700":"generating"===e.status?"bg-yellow-100 text-yellow-700":"failed"===e.status?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"),children:e.status})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-600",children:[(0,r.jsxs)("span",{children:[e.bpm," BPM"]}),(0,r.jsx)("span",{children:"â€¢"}),(0,r.jsx)("span",{children:e.key})]})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-slate-600",children:[(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),(0,r.jsx)("span",{children:e.playCount})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-slate-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,r.jsx)("span",{children:e.likeCount})]})]}),(0,r.jsx)("span",{className:"text-slate-500 text-xs",children:v(e.updatedAt)})]})})]},e.id)))})]})]}),f&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-6 z-50",children:(0,r.jsxs)("div",{className:"max-w-md w-full rounded-2xl bg-white/90 backdrop-blur-xl p-8 border border-slate-200/50 shadow-2xl",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2 text-center",children:"Delete Singer?"}),(0,r.jsxs)("p",{className:"text-slate-600 mb-6 text-center",children:['This will permanently delete "',o.name,'" and all associated songs (',y.totalSongs,"). This action cannot be undone."]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-3 rounded-xl bg-slate-100 text-slate-700 font-semibold hover:bg-slate-200 transition-all",children:"Cancel"}),(0,r.jsx)("button",{onClick:j,className:"flex-1 px-4 py-3 rounded-xl bg-red-600 text-white font-semibold hover:bg-red-700 transition-all",children:"Delete Singer"})]})]})})]})}},2327:(e,t,s)=>{"use strict";s.d(t,{Me:()=>c,R2:()=>d,eM:()=>u,ic:()=>x,lu:()=>m,qT:()=>l,u5:()=>a,vS:()=>h});let r="https://ai-singer-studio-production.ivanleejackson.workers.dev";class a extends Error{constructor(e,t,s){super(e),this.status=t,this.data=s,this.name="APIClientError"}}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if("string"==typeof e)return e;if(!e)return"Request failed";if("object"==typeof e&&t.has(e))return"Request failed (circular reference)";if("object"==typeof e&&t.add(e),"string"==typeof e.message)return e.message;if("string"==typeof e.error)return e.error;if("string"==typeof e.error_description)return e.error_description;if("string"==typeof e.detail)return e.detail;if(Array.isArray(e.errors)){let t=e.errors.map(e=>e.message||e.error||"Unknown error").filter(e=>"string"==typeof e);if(t.length>0)return t.join(", ")}if(Array.isArray(e.issues))return e.issues.map(e=>e.message?e.message:Array.isArray(e.path)&&e.path.length?"".concat(e.path.join("."),": ").concat(e.message||"Invalid value"):"Validation error").join(", ");if(Array.isArray(e)){let s=e.map(e=>"string"==typeof e?e:n(e,t)).filter(e=>e&&"Request failed"!==e);if(s.length>0)return s.join(", ")}if("object"==typeof e.error&&null!==e.error)return n(e.error,t);if("object"==typeof e.message&&null!==e.message)return n(e.message,t);if(e.details)return"string"==typeof e.details?e.details:JSON.stringify(e.details);try{let t=JSON.stringify(e);return t.length>200?t.substring(0,200)+"...":t}catch(e){return"Request failed"}}function o(){let e=localStorage.getItem("token")||localStorage.getItem("authToken")||sessionStorage.getItem("token");return console.log("[API Client] Token found:",!!e),e}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o(),i={"Content-Type":"application/json",...t.headers};s&&(i.Authorization="Bearer ".concat(s));let l="".concat(r).concat(e);console.log("[API Client] Request:",t.method||"GET",l);try{let e,s=await fetch(l,{...t,headers:i,credentials:"include"}),r=s.headers.get("content-type"),o=await s.text();if(o)if((null==r?void 0:r.includes("application/json"))||o.trim().startsWith("{")||o.trim().startsWith("["))try{e=JSON.parse(o)}catch(t){e={message:o}}else e={message:o};else e=null;if(!s.ok)throw console.error("[API Client] Error response:",{status:s.status,contentType:r,data:e}),new a(e?n(e):"Request failed with status ".concat(s.status),s.status,e);return console.log("[API Client] Success:",e),e}catch(e){if(e instanceof a)throw e;throw console.error("[API Client] Network error:",e),new a(e instanceof Error?e.message:"Network error occurred")}}let l={async listVoices(e){let t=e?"?category=".concat(encodeURIComponent(e)):"";return i("/api/voices/elevenlabs".concat(t))},getVoice:async e=>i("/api/voices/elevenlabs/".concat(e)),generateVoice:async e=>(console.log("[API Client] Generating voice with params:",e),i("/api/voices/elevenlabs/generate",{method:"POST",body:JSON.stringify(e)})),async cloneVoice(e){let t=o(),s={};t&&(s.Authorization="Bearer ".concat(t)),console.log("[API Client] Cloning voice");let i=await fetch("".concat(r,"/api/voices/elevenlabs/clone"),{method:"POST",headers:s,body:e,credentials:"include"}),l=await i.json();if(!i.ok)throw new a(n(l)||"Voice cloning failed",i.status,l);return l}},c={list:async()=>i("/api/singers"),get:async e=>i("/api/singers/".concat(e)),create:async e=>i("/api/singers",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>i("/api/singers/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>i("/api/singers/".concat(e),{method:"DELETE"})},d={me:async()=>i("/api/auth/me"),logout:async()=>i("/api/auth/logout",{method:"POST"})},m={getUsage:async()=>i("/api/users/usage"),getQuota:async()=>i("/api/users/me/quota")},u={async list(e){let t=new URLSearchParams;(null==e?void 0:e.type)&&t.set("type",e.type),(null==e?void 0:e.singerId)&&t.set("singerId",e.singerId),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString());let s=t.toString();return i("/api/assets".concat(s?"?".concat(s):""))},get:async e=>i("/api/assets/".concat(e)),delete:async e=>i("/api/assets/".concat(e),{method:"DELETE"}),getStats:async()=>i("/api/assets/stats")},h={async list(e){let t=new URLSearchParams;(null==e?void 0:e.status)&&t.set("status",e.status),(null==e?void 0:e.type)&&t.set("type",e.type),(null==e?void 0:e.singerId)&&t.set("singerId",e.singerId),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString());let s=t.toString();return i("/api/jobs".concat(s?"?".concat(s):""))},get:async e=>i("/api/jobs/".concat(e)),delete:async e=>i("/api/jobs/".concat(e),{method:"DELETE"}),retry:async e=>i("/api/jobs/".concat(e,"/retry"),{method:"POST"}),getStats:async()=>i("/api/jobs/stats")},x={createSong:async e=>i("/api/music/songs",{method:"POST",body:JSON.stringify(e)}),async listSongs(e){let t=new URLSearchParams;(null==e?void 0:e.singerId)&&t.set("singerId",e.singerId),(null==e?void 0:e.status)&&t.set("status",e.status),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString());let s=t.toString();return i("/api/music/songs".concat(s?"?".concat(s):""))},getSong:async e=>i("/api/music/songs/".concat(e)),updateLyrics:async(e,t)=>i("/api/music/songs/".concat(e,"/lyrics"),{method:"POST",body:JSON.stringify(t)}),updateStructure:async(e,t)=>i("/api/music/songs/".concat(e,"/structure"),{method:"POST",body:JSON.stringify(t)}),generateVersion:async(e,t)=>i("/api/music/songs/".concat(e,"/generate"),{method:"POST",body:JSON.stringify(t)}),activateVersion:async(e,t)=>i("/api/music/songs/".concat(e,"/versions/").concat(t,"/activate"),{method:"POST"}),deleteSong:async e=>i("/api/music/songs/".concat(e),{method:"DELETE"})}},5654:(e,t,s)=>{Promise.resolve().then(s.bind(s,567))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=5654)),_N_E=e.O()}]);