(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},2017:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5155),i=t(2115),n=t(63),a=t(2619),l=t.n(a),o=t(2327),c=t(1640);function d(){var e;let s=(0,n.useRouter)(),t=(0,n.useSearchParams)().get("id"),[a,d]=(0,i.useState)(null),[h,u]=(0,i.useState)([]),[m,x]=(0,i.useState)(!0),[g,f]=(0,i.useState)(""),[p,j]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),[N,b]=(0,i.useState)(!1),[k,w]=(0,i.useState)(""),[S,C]=(0,i.useState)(""),[L,E]=(0,i.useState)("");async function P(){if(t)try{x(!0),f("");let[e,s]=await Promise.all([o.Me.get(t),o.eM.list({singerId:t,limit:100})]);d(e.singer),u(s.assets),w(e.singer.name),C(e.singer.description||""),E(e.singer.genre||""),x(!1)}catch(e){console.error("[Singer Profile] Load error:",e),f(e instanceof Error?e.message:"Failed to load singer"),x(!1)}}async function M(){if(t&&k.trim())try{y(!0),f(""),await o.Me.update(t,{name:k,description:S,genre:L}),await P(),j(!1),y(!1)}catch(e){console.error("[Singer Profile] Save error:",e),f(e instanceof Error?e.message:"Failed to save changes"),y(!1)}}async function z(){if(t)try{await o.Me.delete(t),s.push("/dashboard/singers")}catch(e){console.error("[Singer Profile] Delete error:",e),alert("Failed to delete singer")}}(0,i.useEffect)(()=>{t?P():(f("No singer ID provided"),x(!1))},[t]);let W={images:h.filter(e=>"image"===e.type).length,videos:h.filter(e=>"video"===e.type).length,audio:h.filter(e=>"audio"===e.type).length};return m?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(c.tK,{size:"lg",className:"text-primary"})}):g||!a?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(l(),{href:"/dashboard/singers",className:"text-violet-600 hover:text-violet-700 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Singers"]}),(0,r.jsx)(c.Zp,{variant:"default",className:"border-error-200 bg-error-50",children:(0,r.jsx)(c.Wu,{className:"p-6",children:(0,r.jsx)(c.EY,{className:"text-error-700",children:g||"Singer not found"})})})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(l(),{href:"/dashboard/singers",className:"text-violet-600 hover:text-violet-700 flex items-center gap-2 font-semibold",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Singers"]}),(0,r.jsx)("div",{className:"flex gap-3",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.$n,{variant:"outline",size:"md",onClick:()=>j(!1),disabled:v,children:"Cancel"}),(0,r.jsx)(c.$n,{variant:"primary",size:"md",onClick:M,loading:v,disabled:v||!k.trim(),children:v?"Saving...":"Save Changes"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.$n,{variant:"outline",size:"md",onClick:()=>j(!0),children:"Edit Singer"}),(0,r.jsx)(c.$n,{variant:"outline",size:"md",onClick:()=>b(!0),className:"text-red-600 hover:bg-red-50",children:"Delete Singer"})]})})]}),(0,r.jsxs)(c.Zp,{variant:"glass",children:[(0,r.jsx)(c.aR,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-violet-600 to-fuchsia-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg shadow-violet-500/40",children:(null==(e=a.name[0])?void 0:e.toUpperCase())||"S"}),(0,r.jsx)("div",{className:"flex-1",children:p?(0,r.jsx)(c.pd,{type:"text",value:k,onChange:e=>w(e.target.value),placeholder:"Singer name",className:"text-2xl font-bold"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.ZB,{className:"text-3xl",children:a.name}),a.genre&&(0,r.jsx)("span",{className:"inline-block mt-2 px-3 py-1 rounded-full text-sm font-semibold bg-violet-100 text-violet-700",children:a.genre})]})})]})}),(0,r.jsx)(c.Wu,{className:"space-y-6",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.JU,{children:"Genre"}),(0,r.jsx)(c.pd,{type:"text",value:L,onChange:e=>E(e.target.value),placeholder:"e.g., Pop, Rock, Jazz"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.JU,{children:"Description"}),(0,r.jsx)(c.TM,{value:S,onChange:e=>C(e.target.value),rows:4,placeholder:"Describe your singer..."})]})]}):(0,r.jsxs)(r.Fragment,{children:[a.description&&(0,r.jsxs)("div",{children:[(0,r.jsx)(c.EY,{variant:"muted",className:"mb-2",children:"About"}),(0,r.jsx)(c.EY,{children:a.description})]}),a.voiceSettings&&(0,r.jsxs)("div",{children:[(0,r.jsx)(c.EY,{variant:"muted",className:"mb-2",children:"Voice Settings"}),(0,r.jsx)(c.Zp,{variant:"default",className:"bg-slate-50",children:(0,r.jsx)(c.Wu,{className:"p-4",children:(0,r.jsx)(c.EY,{className:"text-sm font-mono",children:JSON.stringify(a.voiceSettings,null,2)})})})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)(c.Zp,{variant:"glass",children:(0,r.jsx)(c.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.EY,{variant:"muted",className:"mb-1",children:"Images Generated"}),(0,r.jsx)(c.DZ,{as:"h2",className:"text-3xl",children:W.images})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-fuchsia-100 to-fuchsia-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-fuchsia-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})})}),(0,r.jsx)(c.Zp,{variant:"glass",children:(0,r.jsx)(c.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.EY,{variant:"muted",className:"mb-1",children:"Videos Created"}),(0,r.jsx)(c.DZ,{as:"h2",className:"text-3xl",children:W.videos})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})]})})}),(0,r.jsx)(c.Zp,{variant:"glass",children:(0,r.jsx)(c.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.EY,{variant:"muted",className:"mb-1",children:"Audio Tracks"}),(0,r.jsx)(c.DZ,{as:"h2",className:"text-3xl",children:W.audio})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-100 to-pink-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})})]})})})]}),(0,r.jsxs)(c.Zp,{variant:"glass",children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{children:"Generate Content"})}),(0,r.jsx)(c.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(l(),{href:"/generate/image?singerId=".concat(t),children:(0,r.jsx)(c.Zp,{variant:"default",className:"hover:border-violet-300 hover:shadow-lg transition-all duration-300 cursor-pointer",children:(0,r.jsxs)(c.Wu,{className:"p-6 text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 rounded-xl bg-gradient-to-br from-fuchsia-100 to-fuchsia-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-fuchsia-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)(c.EY,{className:"font-semibold",children:"Generate Image"})]})})}),(0,r.jsx)(l(),{href:"/generate/video?singerId=".concat(t),children:(0,r.jsx)(c.Zp,{variant:"default",className:"hover:border-violet-300 hover:shadow-lg transition-all duration-300 cursor-pointer",children:(0,r.jsxs)(c.Wu,{className:"p-6 text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 rounded-xl bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),(0,r.jsx)(c.EY,{className:"font-semibold",children:"Generate Video"})]})})}),(0,r.jsx)(l(),{href:"/generate/song?singerId=".concat(t),children:(0,r.jsx)(c.Zp,{variant:"default",className:"hover:border-violet-300 hover:shadow-lg transition-all duration-300 cursor-pointer",children:(0,r.jsxs)(c.Wu,{className:"p-6 text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 rounded-xl bg-gradient-to-br from-pink-100 to-pink-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),(0,r.jsx)(c.EY,{className:"font-semibold",children:"Generate Song"})]})})})]})})]}),h.length>0&&(0,r.jsxs)(c.Zp,{variant:"glass",children:[(0,r.jsx)(c.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(c.ZB,{children:"Recent Content"}),(0,r.jsx)(l(),{href:"/dashboard/gallery?singerId=".concat(t),className:"text-violet-600 hover:text-violet-700 text-sm font-semibold",children:"View All â†’"})]})}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:h.slice(0,4).map(e=>(0,r.jsx)("div",{className:"rounded-xl overflow-hidden border border-slate-200 hover:border-violet-300 transition-all duration-300",children:(0,r.jsxs)("div",{className:"aspect-square bg-gradient-to-br from-slate-100 to-slate-200 relative",children:["image"===e.type&&(0,r.jsx)("img",{src:e.url,alt:"Generated content",className:"w-full h-full object-cover"}),"audio"===e.type&&(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),"video"===e.type&&(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-12 h-12 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),(0,r.jsx)("div",{className:"absolute top-2 right-2",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-white/90 backdrop-blur-xl text-slate-900 capitalize",children:e.type})})]})},e.id))})})]}),N&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(c.Zp,{variant:"glass",className:"max-w-md w-full",children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{children:"Delete Singer?"})}),(0,r.jsxs)(c.Wu,{className:"space-y-4",children:[(0,r.jsxs)(c.EY,{children:["Are you sure you want to delete ",(0,r.jsx)("strong",{children:a.name}),"? This action cannot be undone."]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)(c.$n,{variant:"outline",size:"md",onClick:()=>b(!1),children:"Cancel"}),(0,r.jsx)(c.$n,{variant:"primary",size:"md",onClick:z,className:"bg-red-600 hover:bg-red-700",children:"Delete Singer"})]})]})]})})]})}},2327:(e,s,t)=>{"use strict";t.d(s,{Me:()=>c,R2:()=>d,eM:()=>u,lu:()=>h,qT:()=>o,u5:()=>i,vS:()=>m});let r="https://ai-singer-studio-production.ivanleejackson.workers.dev";class i extends Error{constructor(e,s,t){super(e),this.status=s,this.data=t,this.name="APIClientError"}}function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if("string"==typeof e)return e;if(!e)return"Request failed";if("object"==typeof e&&s.has(e))return"Request failed (circular reference)";if("object"==typeof e&&s.add(e),"string"==typeof e.message)return e.message;if("string"==typeof e.error)return e.error;if("string"==typeof e.error_description)return e.error_description;if("string"==typeof e.detail)return e.detail;if(Array.isArray(e.errors)){let s=e.errors.map(e=>e.message||e.error||"Unknown error").filter(e=>"string"==typeof e);if(s.length>0)return s.join(", ")}if(Array.isArray(e.issues))return e.issues.map(e=>e.message?e.message:Array.isArray(e.path)&&e.path.length?"".concat(e.path.join("."),": ").concat(e.message||"Invalid value"):"Validation error").join(", ");if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?e:n(e,s)).filter(e=>e&&"Request failed"!==e);if(t.length>0)return t.join(", ")}if("object"==typeof e.error&&null!==e.error)return n(e.error,s);if("object"==typeof e.message&&null!==e.message)return n(e.message,s);if(e.details)return"string"==typeof e.details?e.details:JSON.stringify(e.details);try{let s=JSON.stringify(e);return s.length>200?s.substring(0,200)+"...":s}catch(e){return"Request failed"}}function a(){let e=localStorage.getItem("token")||localStorage.getItem("authToken")||sessionStorage.getItem("token");return console.log("[API Client] Token found:",!!e),e}async function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a(),l={"Content-Type":"application/json",...s.headers};t&&(l.Authorization="Bearer ".concat(t));let o="".concat(r).concat(e);console.log("[API Client] Request:",s.method||"GET",o);try{let e,t=await fetch(o,{...s,headers:l,credentials:"include"}),r=t.headers.get("content-type"),a=await t.text();if(a)if((null==r?void 0:r.includes("application/json"))||a.trim().startsWith("{")||a.trim().startsWith("["))try{e=JSON.parse(a)}catch(s){e={message:a}}else e={message:a};else e=null;if(!t.ok)throw console.error("[API Client] Error response:",{status:t.status,contentType:r,data:e}),new i(e?n(e):"Request failed with status ".concat(t.status),t.status,e);return console.log("[API Client] Success:",e),e}catch(e){if(e instanceof i)throw e;throw console.error("[API Client] Network error:",e),new i(e instanceof Error?e.message:"Network error occurred")}}let o={async listVoices(e){let s=e?"?category=".concat(encodeURIComponent(e)):"";return l("/api/voices/elevenlabs".concat(s))},getVoice:async e=>l("/api/voices/elevenlabs/".concat(e)),generateVoice:async e=>(console.log("[API Client] Generating voice with params:",e),l("/api/voices/elevenlabs/generate",{method:"POST",body:JSON.stringify(e)})),async cloneVoice(e){let s=a(),t={};s&&(t.Authorization="Bearer ".concat(s)),console.log("[API Client] Cloning voice");let l=await fetch("".concat(r,"/api/voices/elevenlabs/clone"),{method:"POST",headers:t,body:e,credentials:"include"}),o=await l.json();if(!l.ok)throw new i(n(o)||"Voice cloning failed",l.status,o);return o}},c={list:async()=>l("/api/singers"),get:async e=>l("/api/singers/".concat(e)),create:async e=>l("/api/singers",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>l("/api/singers/".concat(e),{method:"PUT",body:JSON.stringify(s)}),delete:async e=>l("/api/singers/".concat(e),{method:"DELETE"})},d={me:async()=>l("/api/auth/me"),logout:async()=>l("/api/auth/logout",{method:"POST"})},h={getUsage:async()=>l("/api/users/usage"),getQuota:async()=>l("/api/users/me/quota")},u={async list(e){let s=new URLSearchParams;(null==e?void 0:e.type)&&s.set("type",e.type),(null==e?void 0:e.singerId)&&s.set("singerId",e.singerId),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString()),(null==e?void 0:e.offset)&&s.set("offset",e.offset.toString());let t=s.toString();return l("/api/assets".concat(t?"?".concat(t):""))},get:async e=>l("/api/assets/".concat(e)),delete:async e=>l("/api/assets/".concat(e),{method:"DELETE"}),getStats:async()=>l("/api/assets/stats")},m={async list(e){let s=new URLSearchParams;(null==e?void 0:e.status)&&s.set("status",e.status),(null==e?void 0:e.type)&&s.set("type",e.type),(null==e?void 0:e.singerId)&&s.set("singerId",e.singerId),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString()),(null==e?void 0:e.offset)&&s.set("offset",e.offset.toString());let t=s.toString();return l("/api/jobs".concat(t?"?".concat(t):""))},get:async e=>l("/api/jobs/".concat(e)),delete:async e=>l("/api/jobs/".concat(e),{method:"DELETE"}),retry:async e=>l("/api/jobs/".concat(e,"/retry"),{method:"POST"}),getStats:async()=>l("/api/jobs/stats")}},5096:(e,s,t)=>{Promise.resolve().then(t.bind(t,2017))}},e=>{e.O(0,[619,640,441,255,358],()=>e(e.s=5096)),_N_E=e.O()}]);